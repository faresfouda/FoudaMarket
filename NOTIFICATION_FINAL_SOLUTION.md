# ุงูุญู ุงูููุงุฆู ููุดููุฉ ุงูุฅุดุนุงุฑุงุช - Fouda Market

## ุงููุถุน ุงูุญุงูู โ

### ูุง ูุนูู ุจุดูู ุตุญูุญ:
1. โ **ุตูุงุญูุงุช ุงูุฅุดุนุงุฑุงุช** - ุชู ุชูุนูููุง ุจูุฌุงุญ
2. โ **FCM Token** - ูุชู ุญูุธู ูู Firestore
3. โ **ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ** - ูุนูู ูู Firestore
4. โ **ุฅุนุฏุงุฏุงุช Android** - ุชู ุฅุถุงูุชูุง

### ุงููุดููุฉ ุงูุญุงููุฉ:
- Firebase Functions ุชุญุชุงุฌ ุฅูู Blaze plan (ูุฏููุน)
- Vercel API ูุญุชุงุฌ ุฅูู ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ

---

## ุงูุญููู ุงููุชุงุญุฉ

### ุงูุญู ุงูุฃูู: ุชุฑููุฉ Firebase ุฅูู Blaze Plan (ูููุตู ุจู)

#### ุงูุฎุทูุงุช:
1. ุงุฐูุจ ุฅูู [Firebase Console](https://console.firebase.google.com/project/fouda-market/usage/details)
2. ุงููุฑ ุนูู "Upgrade to Blaze"
3. ุฃุถู ุจุทุงูุฉ ุงุฆุชูุงู (ุณุชุฏูุน ููุท ููุง ุชุณุชุฎุฏู)
4. ูุดุฑ Firebase Functions:
   ```bash
   cd functions
   firebase deploy --only functions
   ```

#### ุงููููุฒุงุช:
- โ ุฅุดุนุงุฑุงุช ุชููุงุฆูุฉ ุนูุฏ ุชุบููุฑ ุญุงูุฉ ุงูุทูุจ
- โ ูุง ุญุงุฌุฉ ูุฅุนุฏุงุฏุงุช ุฅุถุงููุฉ
- โ ุขูู ูููุซูู

---

### ุงูุญู ุงูุซุงูู: ุฅุตูุงุญ Vercel API

#### ุงูุฎุทูุงุช:
1. ุงุฐูุจ ุฅูู [Vercel Dashboard](https://vercel.com/dashboard)
2. ุงุฎุชุฑ ูุดุฑูุน `fcm-api`
3. ุงุฐูุจ ุฅูู Settings > Environment Variables
4. ุฃุถู ูุชุบูุฑ ุฌุฏูุฏ:
   - **Name**: `FCM_SERVICE_ACCOUNT_JSON`
   - **Value**: ุงูุณุฎ ูุญุชูู ููู `api/fouda-market-60e939162657.json` ุจุงููุงูู
5. ุฃุนุฏ ูุดุฑ API:
   ```bash
   cd fcm-api
   vercel --prod --force
   ```

---

### ุงูุญู ุงูุซุงูุซ: ุงุณุชุฎุฏุงู HTTP API ูุจุงุดุฑ (ูุคูุช)

#### ุงูููุฏ ุงูุญุงูู ูุนูู:
```dart
// ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ ูู Firestore
await FirebaseFirestore.instance
    .collection('orders')
    .doc(orderId)
    .update({
  'status': status,
  'updatedAt': FieldValue.serverTimestamp(),
});
```

#### ูุฅุถุงูุฉ ุฅุดุนุงุฑุงุช ููุฑูุฉ:
ูููู ุฅุถุงูุฉ HTTP API ูุจุงุดุฑ ูู Flutter (ุจุฏูู Vercel):

```dart
// ุฅุฑุณุงู ุฅุดุนุงุฑ ูุจุงุดุฑ ุนุจุฑ HTTP
final response = await http.post(
  Uri.parse('https://fcm.googleapis.com/fcm/send'),
  headers: {
    'Authorization': 'key=YOUR_SERVER_KEY',
    'Content-Type': 'application/json',
  },
  body: json.encode({
    'to': fcmToken,
    'notification': {
      'title': 'ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ',
      'body': 'ุชู ุชุญุฏูุซ ุญุงูุฉ ุทูุจู',
    },
    'data': {
      'orderId': orderId,
      'status': status,
    },
  }),
);
```

---

## ุงูุงุฎุชุจุงุฑ

### 1. ุงุฎุชุจุงุฑ ุงูุตูุงุญูุงุช:
```
๐ [FCM] Current permission status: AuthorizationStatus.authorized
๐ [FCM] Device Token: <token>
โ [FCM] Token saved to Firestore for user: <user-id>
```

### 2. ุงุฎุชุจุงุฑ ุชุญุฏูุซ ุงูุญุงูุฉ:
```
[FCM] โ ุชู ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ ูู Firestore
```

### 3. ุงุฎุชุจุงุฑ ุงูุฅุดุนุงุฑุงุช:
- ุฅุฐุง ูุงู Blaze plan: ุณุชุตู ุงูุฅุดุนุงุฑุงุช ุชููุงุฆูุงู
- ุฅุฐุง ูุงู Vercel API: ุณุชุตู ุนุจุฑ HTTP
- ุฅุฐุง ูุงู HTTP ูุจุงุดุฑ: ุณุชุตู ููุฑุงู

---

## ุงูุชูุตูุงุช

### ููุฃูุงู:
1. **ุงุณุชุฎุฏู Blaze plan** - ุงูุฃูุซุฑ ุฃูุงูุงู ูููุซูููุฉ
2. **ูุง ุชุดุงุฑู Server Key** - ุงุญุชูุธ ุจู ุขููุงู
3. **ุงุณุชุฎุฏู ูุชุบูุฑุงุช ุงูุจูุฆุฉ** - ูุง ุชุถุนู ูู ุงูููุฏ

### ููุฃุฏุงุก:
1. **Firebase Functions** - ุงูุฃุณุฑุน ูุงูุฃูุซุฑ ุงุณุชูุฑุงุฑุงู
2. **Vercel API** - ุฌูุฏ ููุงุฎุชุจุงุฑ ูุงูุชุญูู
3. **HTTP ูุจุงุดุฑ** - ุณุฑูุน ููู ุฃูู ุฃูุงูุงู

---

## ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ููุฑู:
1. ุงุฎุชุจุฑ ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ
2. ุชุญูู ูู ุญูุธ ุงูุจูุงูุงุช ูู Firestore
3. ุชุฃูุฏ ูู ุนูู ุงูุตูุงุญูุงุช

### ูุชูุณุท ุงููุฏู:
1. ุงุฎุชุฑ ุงูุญู ุงูููุงุณุจ (Blaze ุฃู Vercel)
2. ููุฐ ุงูุญู ุงููุฎุชุงุฑ
3. ุงุฎุชุจุฑ ุงูุฅุดุนุงุฑุงุช

### ุทููู ุงููุฏู:
1. ุฑุงูุจ ุฃุฏุงุก ุงููุธุงู
2. ุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู
3. ุฃุถู ููุฒุงุช ุฅุถุงููุฉ

---

## ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ูุดุงูู:

1. **ุชุญูู ูู ุงูุณุฌูุงุช** ูู Flutter
2. **ุฑุงุฌุน Firebase Console** ููุจูุงูุงุช
3. **ุงุฎุชุจุฑ ุนูู ุฌูุงุฒ ุญูููู**
4. **ุชุฃูุฏ ูู ุงูุฅุนุฏุงุฏุงุช**

---

## ุงูุฎูุงุตุฉ

โ **ุงููุธุงู ูุนูู ุจุดูู ุฃุณุงุณู**
โ **ุงูุตูุงุญูุงุช ููุนูุฉ**
โ **ุงูุจูุงูุงุช ุชูุญูุธ**
โ๏ธ **ุงูุฅุดุนุงุฑุงุช ุชุญุชุงุฌ ุฅุนุฏุงุฏ ุฅุถุงูู**

ุงุฎุชุฑ ุงูุญู ุงูููุงุณุจ ูู ูุณุชุนูู ุงูุฅุดุนุงุฑุงุช ุจุดูู ูุซุงูู! ๐ 