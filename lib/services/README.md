# Services Architecture

تم تقسيم ملف `firebase_service.dart` الكبير إلى عدة ملفات منفصلة ومنظمة حسب المسؤولية (Single Responsibility Principle).

## الملفات الجديدة

### 1. `auth_service.dart`
**المسؤولية**: إدارة المصادقة والملفات الشخصية للمستخدمين
- تسجيل الدخول والخروج
- إنشاء حساب جديد
- إعادة تعيين كلمة المرور
- إدارة الملف الشخصي للمستخدم

### 2. `product_service.dart`
**المسؤولية**: إدارة المنتجات
- عمليات CRUD للمنتجات
- جلب المنتجات حسب الفئة
- المنتجات المميزة والعروض الخاصة
- المنتجات الموصى بها
- Pagination للمنتجات

### 3. `category_service.dart`
**المسؤولية**: إدارة الفئات
- عمليات CRUD للفئات
- البحث في الفئات
- Pagination للفئات
- فئات الصفحة الرئيسية

### 4. `search_service.dart`
**المسؤولية**: البحث في المنتجات والفئات
- البحث في جميع المنتجات (للأدمن)
- البحث في المنتجات المتوفرة فقط (للمستخدمين)
- البحث في فئة محددة
- البحث في الفئات

### 5. `favorites_service.dart`
**المسؤولية**: إدارة المفضلة
- إضافة/إزالة من المفضلة
- جلب منتجات المفضلة
- التحقق من حالة المفضلة

### 6. `cart_service.dart`
**المسؤولية**: إدارة سلة التسوق
- إضافة/إزالة من السلة
- تحديث عناصر السلة
- تفريغ السلة

### 7. `order_service.dart`
**المسؤولية**: إدارة الطلبات
- إنشاء طلبات جديدة
- جلب طلبات المستخدم
- جلب جميع الطلبات (للأدمن)
- تحديث حالة الطلب
- تقارير المبيعات

## التوافق مع الكود القديم

تم الحفاظ على التوافق مع الكود القديم من خلال:

1. **ملف `firebase_service.dart`**: يعمل كـ wrapper للخدمات الجديدة
2. **نفس الواجهة البرمجية**: جميع الـ methods تحتفظ بنفس التوقيع
3. **Singleton Pattern**: كل خدمة تستخدم نفس النمط

## كيفية الاستخدام

### الطريقة القديمة (لا تزال تعمل)
```dart
import '../services/firebase_service.dart';

final firebaseService = FirebaseService();
final products = await firebaseService.getProducts();
```

### الطريقة الجديدة (موصى بها)
```dart
import '../services/product_service.dart';

final productService = ProductService();
final products = await productService.getProducts();
```

## المزايا

1. **قابلية الصيانة**: كل ملف له مسؤولية واحدة واضحة
2. **قابلية الاختبار**: يمكن اختبار كل خدمة بشكل منفصل
3. **قابلية التوسع**: إضافة ميزات جديدة أسهل
4. **إعادة الاستخدام**: يمكن استخدام الخدمات في أماكن مختلفة
5. **الأداء**: تحميل أسرع للكود
6. **التنظيم**: هيكل أوضح وأسهل للفهم

## الهجرة التدريجية

يمكنك الانتقال تدريجياً من `FirebaseService` إلى الخدمات المنفصلة:

1. استخدم `FirebaseService` للكود الموجود
2. استخدم الخدمات المنفصلة للميزات الجديدة
3. قم بتحديث الكود القديم تدريجياً

## ملاحظات مهمة

- جميع الخدمات تستخدم Singleton Pattern
- تم الحفاظ على نفس أسماء الـ methods
- التوافق مع الكود الموجود مضمون
- يمكن إضافة خدمات جديدة بسهولة 