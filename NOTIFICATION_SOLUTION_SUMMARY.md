# ููุฎุต ุญููู ูุธุงู ุงูุฅุดุนุงุฑุงุช - Fouda Market

## ุงููุดููุฉ ุงูุฃุตููุฉ
ุชู ุชุบููุฑ ุญุงูุฉ ุงูุทูุจ ููู ุชุตู ุงูุฅุดุนุงุฑุงุช ูููุณุชุฎุฏููู.

## ุงูุญููู ุงููุทุจูุฉ

### 1. ุฅุตูุงุญ Firebase Functions โ

**ุงููุดููุฉ:** Firebase Functions ููุฌูุฏุฉ ููู ูุฏ ูุง ุชููู ููุดูุฑุฉ ุจุดูู ุตุญูุญ.

**ุงูุญู:**
- ุชุญูู ูู ูุดุฑ Firebase Functions
- ุฃุถู ุณุฌูุงุช ููุตูุฉ ููุชุดุฎูุต
- ุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

**ุงูุฃูุงูุฑ:**
```bash
cd functions
npm install
firebase deploy --only functions
firebase functions:log
```

### 2. ุฅุถุงูุฉ HTTP API ูุจุฏูู โ

**ุงููุดููุฉ:** ุงูุญุงุฌุฉ ูุจุฏูู ูู ุญุงูุฉ ูุดู Firebase Functions.

**ุงูุญู:**
- ุฅูุดุงุก Vercel API ูุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช
- ุฅุถุงูุฉ ุฏุงูุฉ `testNotification` ูู `OrderService`
- ุฅุถุงูุฉ ุฒุฑ ุงุฎุชุจุงุฑ ูู ููุญุฉ ุงูุชุญูู

**ุงููููุงุช ุงููุถุงูุฉ:**
- `fcm-api/api/send-fcm.js`
- `fcm-api/package.json`
- `fcm-api/vercel.json`
- `fcm-api/README.md`

### 3. ุชุญุณูู OrderService โ

**ุงูุชุญุณููุงุช:**
- ุฅุถุงูุฉ ุฏุงูุฉ `testNotification` ูุงุฎุชุจุงุฑ ุงูุฅุดุนุงุฑุงุช
- ุชุญุณูู ุฏุงูุฉ `updateOrderStatus` ูุชุณุชุฎุฏู ููุง ุงูุญููู
- ุฅุถุงูุฉ ุณุฌูุงุช ููุตูุฉ ููุชุดุฎูุต

**ุงูููุฏ ุงููุญุฏุซ:**
```dart
// ูู lib/core/services/order_service.dart
Future<void> updateOrderStatus(String orderId, String status) async {
  // ุชุญุฏูุซ ุงูุญุงูุฉ ูู Firestore
  // ุงุฎุชุจุงุฑ ุฅุฑุณุงู ุงูุฅุดุนุงุฑ ุนุจุฑ HTTP API
  // ุงุณุชุฏุนุงุก Firebase Functions
}
```

### 4. ุฅุถุงูุฉ ูุงุฌูุฉ ุงุฎุชุจุงุฑ โ

**ุงูููุฒุฉ ุงูุฌุฏูุฏุฉ:**
- ุฒุฑ "ุงุฎุชุจุงุฑ ุงูุฅุดุนุงุฑ" ูู ุดุงุดุฉ ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
- ุงุฎุชุจุงุฑ ูุจุงุดุฑ ููุฅุดุนุงุฑุงุช
- ุฑุณุงุฆู ุชุฃููุฏ ูุงุถุญุฉ

**ุงููููุน:** `lib/views/admin/orders_screen.dart`

### 5. ุชุญุณูู ุงูุชูุซูู โ

**ุงููููุงุช ุงููุถุงูุฉ:**
- `NOTIFICATION_SETUP_GUIDE.md` - ุฏููู ุงูุฅุนุฏุงุฏ
- `DEPLOYMENT_GUIDE.md` - ุฏููู ุงููุดุฑ
- `TROUBLESHOOTING_NOTIFICATIONS.md` - ุงุณุชูุดุงู ุงูุฃุฎุทุงุก
- `NOTIFICATION_SOLUTION_SUMMARY.md` - ูุฐุง ุงูููู

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุงุฎุชุจุงุฑ Firebase Functions

```bash
# ูุดุฑ Functions
cd functions
firebase deploy --only functions

# ุนุฑุถ ุงูุณุฌูุงุช
firebase functions:log
```

### 2. ุงุฎุชุจุงุฑ HTTP API

```bash
# ูุดุฑ Vercel API
cd fcm-api
vercel --prod

# ุงุฎุชุจุงุฑ API
npm run test
```

### 3. ุงุฎุชุจุงุฑ ูู ุงูุชุทุจูู

1. ุงุฐูุจ ุฅูู ุดุงุดุฉ ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
2. ุงุฎุชุฑ ุทูุจ
3. ุงููุฑ ุนูู "ุงุฎุชุจุงุฑ ุงูุฅุดุนุงุฑ"
4. ุชุญูู ูู ูุตูู ุงูุฅุดุนุงุฑ

### 4. ุงุฎุชุจุงุฑ ุชุบููุฑ ุงูุญุงูุฉ

1. ุงุฐูุจ ุฅูู ุดุงุดุฉ ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
2. ุงุฎุชุฑ ุทูุจ
3. ุงููุฑ ุนูู "ุชุญุฏูุซ ุงูุญุงูุฉ"
4. ุงุฎุชุฑ ุญุงูุฉ ุฌุฏูุฏุฉ
5. ุชุญูู ูู ูุตูู ุงูุฅุดุนุงุฑ

## ุงูุชุดุฎูุต

### 1. ุชุญูู ูู FCM Token

```dart
// ูู main.dart
Future<void> _printFcmToken() async {
  String? token = await FirebaseMessaging.instance.getToken();
  print('๐ [FCM] Device Token: ${token}');
}
```

### 2. ุชุญูู ูู Firebase Functions

```bash
firebase functions:log --only sendOrderStatusNotification
```

### 3. ุชุญูู ูู Vercel API

```bash
vercel logs --follow
```

### 4. ุชุญูู ูู Firestore

- ุงุฐูุจ ุฅูู Firebase Console
- ุชุญูู ูู ูุฌูุฏ `fcmToken` ูู ุจูุงูุงุช ุงููุณุชุฎุฏู
- ุชุญูู ูู ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ

## ุงูุฃูุงู

### 1. Firebase Functions
- ุชุณุชุฎุฏู Firebase Admin SDK
- ูุญููุฉ ุจูุงุณุทุฉ Firestore Rules
- ุชุนูู ุชููุงุฆูุงู ุนูุฏ ุชุญุฏูุซ ุงูุจูุงูุงุช

### 2. HTTP API
- ุชุณุชุฎุฏู Service Account
- ูุญููุฉ ุจูุงุณุทุฉ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
- ุชุชุทูุจ FCM Token ุตุงูุญ

## ุงูุฃุฏุงุก

### 1. Firebase Functions
- **ุงููููุฒุงุช:** ุชููุงุฆูุฉุ ุขููุฉุ ููุซููุฉ
- **ุงูุนููุจ:** ูุฏ ุชููู ุจุทูุฆุฉ ูู ุงูุจุฏุงูุฉ

### 2. HTTP API
- **ุงููููุฒุงุช:** ุณุฑูุนุฉุ ูุงุจูุฉ ููุชุญูู
- **ุงูุนููุจ:** ุชุชุทูุจ ุฅุนุฏุงุฏ ุฅุถุงูู

## ุงููุฑุงูุจุฉ

### 1. Firebase Console
- Functions > Logs
- Firestore Database
- Analytics > Events

### 2. Vercel Dashboard
- Functions > Logs
- Analytics > Requests

### 3. Flutter Debug
```dart
print('[FCM] Token: $fcmToken');
print('[FCM] User ID: $userId');
print('[FCM] Order ID: $orderId');
print('[FCM] Status: $status');
```

## ุงูุฎุทูุงุช ุงูุชุงููุฉ

### 1. ุงููุดุฑ ุงูููุฑู
```bash
# ูุดุฑ Firebase Functions
cd functions
firebase deploy --only functions

# ูุดุฑ Vercel API (ุงุฎุชูุงุฑู)
cd fcm-api
vercel --prod
```

### 2. ุงูุงุฎุชุจุงุฑ
1. ุงุฎุชุจุฑ ุนูู ุฌูุงุฒ ุญูููู
2. ุงุฎุชุจุฑ ูู ุญุงูุงุช ูุฎุชููุฉ (foreground, background)
3. ุงุฎุชุจุฑ ูุน ูุณุชุฎุฏููู ูุฎุชูููู

### 3. ุงููุฑุงูุจุฉ
1. ุฑุงูุจ ุณุฌูุงุช Firebase Functions
2. ุฑุงูุจ ูุนุฏู ูุฌุงุญ ุงูุฅุดุนุงุฑุงุช
3. ุฑุงูุจ ุงุณุชุฌุงุจุฉ ุงููุณุชุฎุฏููู

## ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ูุดุงูู:

1. ุฑุงุฌุน `TROUBLESHOOTING_NOTIFICATIONS.md`
2. ุชุญูู ูู ุงูุณุฌูุงุช
3. ุงุฎุชุจุฑ ุนูู ุฌูุงุฒ ุญูููู
4. ุชุฃูุฏ ูู ุงูุฅุนุฏุงุฏุงุช

## ุงูุฎูุงุตุฉ

ุชู ุชุทุจูู ุญููู ุดุงููุฉ ููุธุงู ุงูุฅุดุนุงุฑุงุช:

โ **Firebase Functions** - ุงูุญู ุงูุฃุณุงุณู  
โ **HTTP API** - ุงูุญู ุงูุจุฏูู  
โ **ูุงุฌูุฉ ุงุฎุชุจุงุฑ** - ููุชุดุฎูุต  
โ **ุชูุซูู ุดุงูู** - ููุฏุนู  

ุงููุธุงู ุงูุขู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูุน ุฅููุงููุฉ ุงูุชุดุฎูุต ูุงููุฑุงูุจุฉ. 